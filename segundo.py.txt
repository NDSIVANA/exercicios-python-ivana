# 2. Tuplas Imutáveis + Conversão Estrutural
# Você recebe uma lista de tuplas contendo (nome, nota) de alunos.
# Crie um programa que:
# • transforme os dados em um dicionário
# • se o aluno já existir, calcule a média das notas recebidas
# • exiba os alunos em ordem crescente de média

from collections import defaultdict

def calcular_medias_alunos(dados_alunos):
    """
    Recebe uma lista de tuplas (nome, nota) e:
    - Agrupa todas as notas por aluno
    - Calcula a média de cada aluno
    - Retorna os alunos ordenados pela média (crescente)
    """

    # Armazena as notas de cada aluno: {nome: [notas]}
    notas_por_aluno = defaultdict(list)

    for nome, nota in dados_alunos:
        notas_por_aluno[nome].append(nota)

    # Calcula médias: {nome: media}
    medias_alunos = {
        nome: sum(notas) / len(notas)
        for nome, notas in notas_por_aluno.items()
    }

    # Ordena por média crescente (e nome como critério secundário)
    alunos_ordenados = sorted(medias_alunos.items(), key=lambda x: (x[1], x[0]))

    return alunos_ordenados


# Exemplo de entrada:
dados_entrada = [
    ("Ana", 8),
    ("João", 7),
    ("Ana", 10),
    ("Bia", 9),
    ("João", 9)
]

# Chamando a função
alunos_ordenados = calcular_medias_alunos(dados_entrada)

print("Dados de entrada:")
print(dados_entrada)

print("\nAlunos ordenados por média (crescente):")
for nome, media in alunos_ordenados:
    print(f"{nome}: {media:.2f}")
